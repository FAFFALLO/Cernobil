Simone<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Černobyl</title>
  <style>
    :root{
      --bg:#05070a;
      --cold: rgba(80, 255, 200, .18);
      --danger: rgba(255, 50, 60, .22);
      --vignette: radial-gradient(110% 90% at 50% 50%, rgba(0,0,0,0) 35%, rgba(0,0,0,.72) 100%);
      --scan: repeating-linear-gradient(to bottom,
        rgba(255,255,255,.05) 0px, rgba(255,255,255,.05) 1px,
        rgba(0,0,0,0) 3px, rgba(0,0,0,0) 6px
      );
    }

    html, body { height: 100%; }
    body{
      margin:0;
      background: var(--bg);
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
      scrollbar-width: thin;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    main{ min-height: 100%; }
    .panel{
      position: relative;
      height: 100vh;
      width: 100%;
      scroll-snap-align: start;
      overflow: hidden;
      background: #000;
      isolation: isolate;
    }

    .panel::before{
      content:"";
      position:absolute;
      inset:-2%;
      background-image: var(--img);
      background-size: cover;
      background-position: center;
      transform: translate3d(0,var(--shift,0px),0) scale(1.04);
      filter: grayscale(1) contrast(1.18) saturate(.85) brightness(.72);
      will-change: transform, filter;
    }

    .panel::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        var(--vignette),
        linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.35)),
        var(--scan);
      mix-blend-mode: overlay;
      opacity: .85;
      pointer-events:none;
    }

    .tone{
      position:absolute;
      inset:0;
      pointer-events:none;
    }
    .panel[data-tone="cold"] .tone{
      background: radial-gradient(80% 65% at 40% 45%, var(--cold), rgba(0,0,0,0) 55%);
      mix-blend-mode: screen;
      opacity: .85;
    }
    .panel[data-tone="danger"] .tone{
      background: radial-gradient(85% 70% at 55% 45%, var(--danger), rgba(0,0,0,0) 58%);
      mix-blend-mode: screen;
      opacity: .9;
    }

    .noise{
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 20% 10%, rgba(255,255,255,.06), rgba(0,0,0,0) 35%),
        radial-gradient(circle at 70% 60%, rgba(255,255,255,.05), rgba(0,0,0,0) 40%),
        radial-gradient(circle at 40% 80%, rgba(255,255,255,.04), rgba(0,0,0,0) 45%);
      opacity:.55;
      mix-blend-mode: soft-light;
      pointer-events:none;
      animation: drift 7s linear infinite;
    }
    @keyframes drift{
      0%{ transform: translate3d(0,0,0); }
      50%{ transform: translate3d(-1.2%, .8%, 0); }
      100%{ transform: translate3d(0,0,0); }
    }

    .glitch::before{ animation: jitter 4.6s infinite steps(2, end); }
    @keyframes jitter{
      0%, 92%, 100% { transform: translate3d(0,var(--shift,0px),0) scale(1.04); }
      93% { transform: translate3d(-8px, calc(var(--shift,0px) + 3px), 0) scale(1.05); filter: grayscale(1) contrast(1.3) brightness(.68); }
      94% { transform: translate3d(10px, calc(var(--shift,0px) - 4px), 0) scale(1.05); }
      95% { transform: translate3d(-4px, calc(var(--shift,0px) + 2px), 0) scale(1.04); }
    }

    /* icon layer (no text) */
    .icon{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      pointer-events:none;
      mix-blend-mode: screen;
      opacity: .90;
      filter: drop-shadow(0 0 14px rgba(100,255,200,.35));
      animation: iconJitter 3.8s infinite steps(2, end);
    }
    .panel[data-tone="danger"] .icon{
      filter: drop-shadow(0 0 16px rgba(255,60,70,.35));
    }
    .icon svg{ width: min(54vmin, 540px); height: auto; opacity:.95; }
    .panel:not(.glitch) .icon{ animation: none; }

    @keyframes iconJitter{
      0%, 90%, 100% { transform: translate3d(0,0,0); opacity:.9; }
      91% { transform: translate3d(10px, -6px, 0); opacity:.75; }
      92% { transform: translate3d(-12px, 8px, 0); opacity:.88; }
    }

    /* TEXT OVERLAY (minimal, dystopic) */
    .caption{
      position:absolute;
      left: clamp(14px, 3vw, 28px);
      bottom: clamp(14px, 3vw, 28px);
      max-width: min(700px, 92vw);
      padding: 14px 16px;
      border-radius: 14px;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 0 0 1px rgba(0,0,0,.35) inset;
      color: rgba(230,255,245,.86);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      letter-spacing: .2px;
      line-height: 1.35;
      text-wrap: pretty;
      pointer-events:none;
    }
    .panel[data-tone="danger"] .caption{
      color: rgba(255,235,235,.86);
      border-color: rgba(255,90,100,.18);
    }
    .caption::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius: 14px;
      background: linear-gradient(90deg, rgba(120,255,210,.18), rgba(255,80,90,.18));
      opacity:.35;
      mix-blend-mode: screen;
      pointer-events:none;
      animation: flicker 5.2s infinite steps(2,end);
    }
    @keyframes flicker{
      0%, 86%, 100% { opacity:.30; }
      87% { opacity:.12; }
      88% { opacity:.42; }
      89% { opacity:.20; }
    }
    .caption p{ margin: 0; position: relative; z-index: 1; }
    .caption p + p{ margin-top: 10px; }

    /* HERO TITLE */
    .hero{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      pointer-events:none;
      padding: 24px;
      text-align:center;
    }
    .hero h1{
      margin:0;
      font-size: clamp(56px, 9vw, 120px);
      letter-spacing: 1px;
      color: rgba(235,255,248,.92);
      text-transform: none;
      text-shadow:
        0 0 22px rgba(120,255,210,.22),
        0 0 44px rgba(120,255,210,.14),
        0 2px 0 rgba(0,0,0,.65);
      font-weight: 800;
    }
    .hero .credit{
      margin-top: 14px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color: rgba(255,255,255,.70);
      font-size: clamp(12px, 1.6vw, 16px);
      letter-spacing: .3px;
      text-shadow: 0 1px 0 rgba(0,0,0,.65);
    }
    .hero .mark{
      display:inline-block;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      box-shadow: 0 0 14px rgba(120,255,210,.12);
    }

    /* dots */
    .dots{
      position: fixed;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      display:flex;
      flex-direction: column;
      gap: 10px;
      z-index: 50;
      pointer-events: none;
      opacity: .75;
      mix-blend-mode: screen;
    }
    .dot{
      width: 6px; height: 6px;
      border-radius: 999px;
      background: rgba(140,255,210,.45);
      box-shadow: 0 0 10px rgba(140,255,210,.20);
    }
    .dot.on{ background: rgba(255,70,80,.55); box-shadow: 0 0 12px rgba(255,70,80,.25); }

    @media (prefers-reduced-motion: reduce){
      .noise, .glitch::before, .icon, .caption::before{ animation: none !important; }
      body{ scroll-behavior: auto; }
    }
  </style>
</head>
<body>
  <main id="timeline"></main>
  <div class="dots" id="dots" aria-hidden="true"></div>

  <script>
    const panels = [
      // HERO
      {
        tone:"cold", glitch:true,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Pripyat_-_ferris_wheel.jpg/1280px-Pripyat_-_ferris_wheel.jpg",
        hero:true,
        heroCredit:"created by Andrea Favali, Marchetti Simone, Diego Boattini"
      },

      // PERSON 2 - CONTEXT
      {
        tone:"cold", glitch:false,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/SovrusNPP.svg/1280px-SovrusNPP.svg.png",
        icon:"trefoil",
        text:[
          "At the time of the disaster, Russia was in the middle of the Cold War.",
          "Information was distorted by Soviet propaganda or censored."
        ]
      },

      {
        tone:"cold", glitch:true,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/RBMK_en.svg/1280px-RBMK_en.svg.png",
        text:[
          "The Chernobyl site used the RBMK-1000 reactor: one of the cheapest.",
          "To save on construction, many safety regulations were ignored."
        ]
      },

      {
        tone:"cold", glitch:false,
        img:"https://commons.wikimedia.org/wiki/Special:FilePath/RBMK_Reaktor_ChNPP-4.svg?width=1200",
        text:[
          "AZ-5 was the emergency system meant to fully insert control rods and shut the reactor down.",
          "But graphite tips at the end of the rods increased the reaction, even if only slightly."
        ]
      },

      // PERSON 2 - TIMELINE
      {
        tone:"cold", glitch:true,
        img:"https://commons.wikimedia.org/wiki/Special:FilePath/Control%20Room%20of%20Chernobyl%20Nuclear%20Power%20Plant%20Unit%203.jpg?width=1600",
        icon:"phone",
        text:[
          "Evening of April 25, 1986: a power test was planned, aiming for 700 MWatt (the safety limit).",
          "A phone call delayed the test. The reactor was left at too low power."
        ]
      },

      {
        tone:"cold", glitch:false,
        img:"https://commons.wikimedia.org/wiki/Special:FilePath/Control%20Room%20of%20Chernobyl%20Nuclear%20Power%20Plant%20Unit%203.jpg?width=1600",
        text:[
          "Xenon built up in the core, slowing the reaction.",
          "When the test resumed, power dropped to 30 MWatt."
        ]
      },

      {
        tone:"cold", glitch:true,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7d/RBMK-1000_reactor_control_rod_positions.svg/1280px-RBMK-1000_reactor_control_rod_positions.svg.png",
        icon:"gauge",
        text:[
          "To restore power, almost all control rods were removed, violating safety regulations.",
          "Power increased too quickly and pressure rose inside the core."
        ]
      },

      {
        tone:"danger", glitch:true,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/4th_block_of_the_Chernobyl_Nuclear_Power_Plant.jpg/1280px-4th_block_of_the_Chernobyl_Nuclear_Power_Plant.jpg",
        icon:"burst",
        text:[
          "AZ-5 was pressed, but the graphite tips increased the reaction.",
          "An explosion blew the core open."
        ]
      },

      {
        tone:"danger", glitch:false,
        img:"https://upload.wikimedia.org/wikipedia/commons/9/90/Radioactivity_warning_sign_in_the_Chernobyl_Exclusion_Zone.jpg",
        icon:"trefoil",
        text:[
          "The instruments measured up to 3.6 Rontgen (their maximum).",
          "Later it was discovered the level was about 20,000 Rontgen."
        ]
      },

      {
        tone:"danger", glitch:true,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Geiger_counter_showing_high_radiation_-_Public_domain_image_with_no_copyright.jpg/1280px-Geiger_counter_showing_high_radiation_-_Public_domain_image_with_no_copyright.jpg",
        text:[
          "(1:23 April 26, 1986)"
        ]
      },

      // PERSONA 3 - PLACEHOLDER MINIMO (finché non mi dai il copione vero)
      {
        tone:"cold", glitch:false,
        img:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Pripyat_-_ferris_wheel.jpg/1280px-Pripyat_-_ferris_wheel.jpg",
        text:[
          "Health consequences. Economic disaster.",
          "The sarcophagus. The causes."
        ]
      },

        ,
  {
    tone:"danger",
    glitch:true,
    img:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/4th_block_of_the_Chernobyl_Nuclear_Power_Plant.jpg/1280px-4th_block_of_the_Chernobyl_Nuclear_Power_Plant.jpg",
    hero:true,
    heroTitle:"THANK FOR WATCHING",
    heroCredit:"Andrea Favali Marchetti Simone Diego Boattini"
  },






    ];

    function iconSVG(kind){
      if(kind === "trefoil"){
        return `
          <svg viewBox="0 0 512 512" fill="none" aria-hidden="true">
            <circle cx="256" cy="256" r="18" fill="rgba(255,255,255,.9)"/>
            <path d="M256 60c40 0 78 18 102 49l-58 34c-10-10-26-18-44-18s-34 8-44 18l-58-34c24-31 62-49 102-49Z" fill="rgba(255,255,255,.9)"/>
            <path d="M442 332c-20 35-54 58-92 64l-2-67c13-3 27-12 36-28s10-34 6-49l56-36c15 36 14 80-4 116Z" fill="rgba(255,255,255,.9)"/>
            <path d="M70 332c-18-36-19-80-4-116l56 36c-4 15-3 33 6 49s23 25 36 28l-2 67c-38-6-72-29-92-64Z" fill="rgba(255,255,255,.9)"/>
            <circle cx="256" cy="256" r="180" stroke="rgba(255,255,255,.22)" stroke-width="10"/>
          </svg>`;
      }
      if(kind === "phone"){
        return `
          <svg viewBox="0 0 512 512" fill="none" aria-hidden="true">
            <path d="M182 70c18-10 41-6 55 9l38 40c12 13 14 32 5 48l-18 32c-6 10-4 23 4 32l65 65c9 9 22 10 32 4l32-18c16-9 35-7 48 5l40 38c15 14 19 37 9 55l-22 38c-12 21-33 35-57 38-152 17-322-153-305-305 3-24 17-45 38-57l38-22Z"
                  fill="rgba(255,255,255,.9)"/>
            <path d="M120 120l72 72" stroke="rgba(0,0,0,.35)" stroke-width="18" stroke-linecap="round"/>
          </svg>`;
      }
      if(kind === "gauge"){
        return `
          <svg viewBox="0 0 512 512" fill="none" aria-hidden="true">
            <path d="M96 336a160 160 0 1 1 320 0" stroke="rgba(255,255,255,.85)" stroke-width="26" stroke-linecap="round"/>
            <circle cx="256" cy="336" r="16" fill="rgba(255,255,255,.9)"/>
            <path d="M256 336 L360 270" stroke="rgba(255,255,255,.9)" stroke-width="14" stroke-linecap="round"/>
            <path d="M128 370h256" stroke="rgba(255,255,255,.25)" stroke-width="10" stroke-linecap="round"/>
          </svg>`;
      }
      if(kind === "burst"){
        return `
          <svg viewBox="0 0 512 512" fill="none" aria-hidden="true">
            <path d="M256 54l34 66 70-18-18 70 66 34-66 34 18 70-70-18-34 66-34-66-70 18 18-70-66-34 66-34-18-70 70 18 34-66Z"
                  fill="rgba(255,255,255,.9)"/>
            <circle cx="256" cy="256" r="70" fill="rgba(0,0,0,.25)"/>
          </svg>`;
      }
      return "";
    }

    const timeline = document.getElementById("timeline");
    const dots = document.getElementById("dots");

    function makeCaption(lines){
      const c = document.createElement("div");
      c.className = "caption";
      c.innerHTML = lines.map(t => `<p>${escapeHTML(t)}</p>`).join("");
      return c;
    }

    function escapeHTML(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function makePanel(p){
      const s = document.createElement("section");
      s.className = "panel" + (p.glitch ? " glitch" : "");
      s.dataset.tone = p.tone || "cold";
      s.style.setProperty("--img", `url("${p.img}")`);

      const tone = document.createElement("div");
      tone.className = "tone";
      s.appendChild(tone);

      const noise = document.createElement("div");
      noise.className = "noise";
      s.appendChild(noise);

      if(p.icon){
        const icon = document.createElement("div");
        icon.className = "icon";
        icon.innerHTML = iconSVG(p.icon);
        s.appendChild(icon);
      }

      if(p.text && p.text.length){
        s.appendChild(makeCaption(p.text));
      }

      if(p.hero){
        const hero = document.createElement("div");
        hero.className = "hero";
        hero.innerHTML = `
          <div>
            <h1>Černobyl</h1>
            <div class="credit"><span class="mark">${escapeHTML(p.heroCredit || "")}</span></div>
          </div>
        `;
        s.appendChild(hero);
      }

      return s;
    }

    panels.forEach((p, i) => {
      timeline.appendChild(makePanel(p));
      const d = document.createElement("div");
      d.className = "dot" + (i === 0 ? " on" : "");
      dots.appendChild(d);
    });

    const allPanels = [...document.querySelectorAll(".panel")];
    const allDots = [...document.querySelectorAll(".dot")];

    function update(){
      const mid = window.scrollY + window.innerHeight * 0.5;

      let active = 0;
      let bestDist = Infinity;

      for(let i=0;i<allPanels.length;i++){
        const r = allPanels[i].getBoundingClientRect();
        const top = window.scrollY + r.top;
        const center = top + r.height/2;
        const dist = Math.abs(center - mid);
        if(dist < bestDist){ bestDist = dist; active = i; }

        const t = (r.top / window.innerHeight);
        const y = Math.max(-18, Math.min(18, t * -12));
        allPanels[i].style.setProperty("--shift", y.toFixed(2) + "px");
      }

      allDots.forEach((d, i) => d.classList.toggle("on", i === active));
    }

    window.addEventListener("scroll", update, { passive:true });
    update();

    window.addEventListener("keydown", (e) => {
      const current = allDots.findIndex(d => d.classList.contains("on"));
      if(["ArrowDown","PageDown"," "].includes(e.key)){
        e.preventDefault();
        const next = Math.min(allPanels.length - 1, current + 1);
        allPanels[next].scrollIntoView({ behavior:"smooth" });
      }
      if(["ArrowUp","PageUp"].includes(e.key)){
        e.preventDefault();
        const prev = Math.max(0, current - 1);
        allPanels[prev].scrollIntoView({ behavior:"smooth" });
      }
    });
  </script>
</body>
</html>
